<?session_start();?>
<html>
<head>
  <title>Sign</title>
  <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
  <link href="css/bootstrap-responsive.css" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="css/parkji-style.css" rel="stylesheet">
  <meta charset="utf-8">
</head>
<style>
  .btn{
    margin-top: 15px;
    width: 150px;
    height: 40px;
    font-size: 14px;
    padding-top: 10px;
  } 

  b{
    font-size:16px;
  }

  .row{
    padding-left: 40px;
  }
</style>

<body>

  <div class="container">

    <hr>

    <div class="jumbotron">
      <h1>회원가입</h1>
      <p class="lead">Join us</p>
    </div>

    <hr>

    <div class="row">

      <form action="sign_up.php" method = "POST" name = "frm" id="frm" class="form-horizontal span12">

        <div class="control-group">
          <label class="control-label" for="Name"><h3 class="span2">이름 : </h3></label>
          
          <div class="control span5" onfocusin="checkName(this)">
            <input type = "text" id="signText" name = "Name" class="name" onblur="checkName(this)"></input>
          </div>
          <div style="margin-top:25px">
            <b class="signName">두 글자 이상 적어주세요.</b>
          </div>

        </div>

        <div class="control-group">

          <label class="control-label" for="Id"><h3 class="span2">아이디 : </h3></label>
          
          <div class="control span5">
            <input type = "text" id="signText" name = "Id" class="Id" readonly></input>
          </div>

          <button class="btn span2" type="button" onClick="idCheck();">중복 검사</button>
          
        </div>

        <div class="control-group">

          <label class="control-label" for="Pass"><h3 class="span2">비밀번호 : </h3></label>
          
          <div class="control span5">
            <input type = "password" id="signText" name = "Pass" class="Pw" onblur="checkPw(this)"></input>
          </div>

          <div style="margin-top:25px">
            <b class="signPw">영문, 숫자를 혼용하여 6자리 이상 20자리 이하로 입력 해주세요.</b>
          </div>

        </div>

        <div class="control-group">

          <label class="control-label" for="Pass"><h3 class="span2">재입력 : </h3></label>
          
          <div class="control span5">
            <input type = "password" id="signText" class="rePw" onblur="repeatPw(this)"></input>
          </div>

          <div style="margin-top:25px">
            <b class="rePw" style="color:red"></b>
          </div>

        </div>

        <div class="control-group">
          <label class="control-label" for="mailName"><h3 class="span2">e메일 : </h3></label>
          
          <div class="control span3" style=" font-size:20pt;">
            <input type = "text" id="email" name = "mailName" style="width:180px"> &nbsp&nbsp&nbsp&nbsp@</input>
          </div>
          <div class="control span3">
            <input type = "text" id="emailCompany" name = "mailCompany" onblur="checkMail(this)"></input>
          </div>

          <div class="btn-group span1">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" data-target="#" aria-expanded="false">
              Mail<span class="caret"></span></button>
              <ul class="dropdown-menu control" role="menu" aria-labelledby="dropdownMenu" id="mailUl">
                <li><a tabindex="-1" href="#">daum.net</a></li>
                <li><a tabindex="-1" href="#">gmail.com</a></li>
                <li><a tabindex="-1" href="#">hanmail.net</a></li>
                <li><a tabindex="-1" href="#">nate.com</a></li>
                <li><a tabindex="-1" href="#">naver.com</a></li>
                <li class="divider"></li>
                <li><a tabindex="-1" href="#">직접입력</a></li>
              </ul>
            </div>

          </div>
          <div class="control-group">
            <div class="control offset3">
              <b class="signMail"></b>
            </div></div>

            <div class="control-group">
              <label class="control-label" ><h3 class="span2">전화번호 : </h3></label>
              <div class="btn-group control span1">
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" id="telBtn" data-target="#" aria-expanded="false" style="width:80px;">
                  010<span class="caret"></span></button>
                  <ul class="dropdown-menu control span1" role="menu" aria-labelledby="dropdownMenu" id="telUl">
                    <li><a tabindex="-1" href="#">010</a></li>
                    <li><a tabindex="-1" href="#">011</a></li>
                    <li><a tabindex="-1" href="#">016</a></li>
                    <li><a tabindex="-1" href="#">017</a></li>
                    <li><a tabindex="-1" href="#">018</a></li>
                    <li><a tabindex="-1" href="#">019</a></li>
                  </ul>
                </div>

                <div class="control span1" style="margin-left:50px;">
                  <input type="text" id="firstPN" name="firstPN" onblur="checkTel()"></input>
                </div>

                <div class="control span1" style="margin-left:50px;">
                  <h3 style="text-align:center;">-</h3>
                </div>

                <div class="control span1">
                  <input type="text" id="middlePN" name="middlePN" onblur="checkTel()"></input>
                </div>

                <div class="control span1" style="margin-left:50px;">
                  <h3 style="text-align:center;">-</h3>
                </div>

                <div class="control span1">
                  <input type="text" id="lastPN" name="lastPN" onblur="checkTel()"></input>
                </div>
              </div>
              <div class="control-group">
                <div class="control offset3">
                  <b class="signTel"></b>
                </div></div>

                <div class="control-group">

                  <div class="control span2 offset2" style="margin-left:230px;">
                    <button type="button" class="btn btn-primary control" onclick="clickSubmit()">가입</button>
                  </div>

                  <div class="control span2 offset1">
                    <button type="reset" class="btn btn-info control">다시적기</button>
                  </div>

                </div>

              </div>

            </form>

          </div>

          <script src="http://code.jquery.com/jquery-latest.min.js"></script>
          <script src="//maxcdn.bootstrapcdn.com/bootstrap/latest/js/bootstrap.min.js"></script>
          <script>
            var openwin;
            var checkSubmit=new Array();

            $(document).bind('ready',function(){
              $('li').bind('click',function(){
                var liParent=$(this).parent();
                var thisText=$(this).text();
                var mail=$('#emailCompany');

                if(liParent.attr('id')=="mailUl"){
                  if(thisText=="직접입력")
                    mail.val('');
                  else{
                   mail.val(thisText);
                   checkSubmit[3]=1;
                   $('.signMail').text('');
                 }
               }
               else if(liParent.attr('id')=="telUl"){
                $('#firstPN').attr('value',thisText);
                $('#telBtn').text(thisText);
              }
            })
            })

            function insertTel(obj){
              $('#firstPN').attr('value',$(obj).text());
            }

            function idCheck(){
              openwin = window.open("id_Check.php","","width=400, height=300");
            } 

            function insertId(){
              var i = openwin.hidden.temp_return.value;
              $('.Id').attr('value',i);
              var id=$('.Id').val();
            }

            function clickSubmit(){
              var frm=document.getElementById('frm');
              for(i=0;i<6;i++){
                if(checkSubmit[i]==1){
                  checkSubmit[6]=1;
                }
                
                else if(checkSubmit[i]==0){
                  checkSubmit[6]=0;
                  break;
                }
              }

              if(checkSubmit[6]==1){
                document.frm.submit();
              }
              else if(checkSubmit[6]==0){
                switch(i){
                  case 0:
                  $('.Name').focus();
                  break;

                  case 1:
                  $('.Pw').focus();
                  break;

                  case 2:
                  $('.rePw').focus();
                  break;

                  case 3:
                  $('#emailCompanyl').focus();
                  break;

                  case 4:
                  $('#middlePN').focus();
                  break;

                  case 5:
                  $('.Id').focus();
                  break;
                }
              }
            }

            function checkName(obj){
              if(obj.value.length<3){
                $('.signName').text('두 글자 이상 적어주세요.');
                $('.signName').css('color','red');
                checkSubmit[0]=0;
              }
              else{
                $('.signName').text('');
                checkSubmit[0]=1;
              }
            }

            function checkPw(obj){
              var reg_pwd = /^.*(?=.{6,20})(?=.*[0-9])(?=.*[a-zA-Z]).*$/;//http://gongam100.tistory.com/24 출처
              if(reg_pwd.test(obj.value)){
                $('.signPw').text('사용할 수 있는 비밀번호 입니다.');
                $('.signPw').css('color','green');
                checkSubmit[1]=1;
              }
              else{
                $('.signPw').text('영문, 숫자를 혼용하여 6자리 이상 20자리 이하로 입력 해주세요.');
                $('.signPw').css('color','red');
                checkSubmit[1]=0;
              }
            }

            function repeatPw(obj){
              var tmp=$('.Pw').val();
              if(obj.value!=tmp){
                $('.rePw').text('처음 입력한 비밀번호와 같지 않습니다.');
                checkSubmit[2]=0;
              }
              else if(obj.value==tmp){
                $('.rePw').text('');
                checkSubmit[2]=1;
              }
            }

            function checkMail(obj){ //http://egloos.zum.com/igniter/v/10833768 출처 
              var regEmail = /((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
              if(!regEmail.test(obj.value)){
                $('.signMail').text('사용할 수 없는 메일형식 입니다.');
                $('.signMail').css('color','red');
                checkSubmit[3]=0;
              }
              else {
                $('.signMail').text('');
                checkSubmit[3]=1;
              }
            }

            function checkTel(){
              var regPhone = /^((01[1|6|7|8|9])[1-9]+[0-9]{6,7})|(010[1-9][0-9]{7})$/;//http://egloos.zum.com/igniter/v/10833768 출처 
              var tmptel=$('#firstPN').val()+$('#middlePN').val()+$('#lastPN').val();
              if(!regPhone.test(tmptel)){
                $('.signTel').text('숫자만 입력 해주세요.');
                $('.signTel').css('color','red');
                checkSubmit[4]=0;
              }
              else {
                $('.signTel').text('');
                checkSubmit[4]=1;
              }
            }

            function checkId(){
             checkSubmit[5]=1;
           }
         </script>

       </body>
       </html>